<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>3001-dirtree</title>

  <link rel="stylesheet" href="bower_components/webix/codebase/webix.css" type="text/css" charset="utf-8">
  <script src="bower_components/webix/codebase/webix.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>
  <script>
   webix.ready(function(){
   
   var myjson = webix.DataDriver.myjson = webix.copy(webix.DataDriver.json);
            myjson.child=function(obj){
				
                return obj.children;
            };

  
    webix.ui({
      rows: [
        {
          view: "form", elements: [
            { id: "pathInput", view: "text", label: "Path", name: "path", placeholder: "Enter full path to expand here..", on:{
				"onChange": function(newv, oldv){
					webix.ajax().headers("application/json").post("/", {path:newv}, function(t, d, x){
						console.log(d.json())
						$$("directoryTree").clearAll()
						$$("directoryTree").load("/forwebixtreetable?path="+newv);
						setTimeout(function(){$$("directoryTree").openAll()},2000)
						
					})
				}
			} },
          ]
        },
        {
		  id: "directoryTree",
          view: "treetable",

          columns: [
            { id: "name", header: "Path", fillspace:1, template: "{common.treetable()} #name#"}, 
          ],
		  data:[{name:"Path", open:true, children:[{name:"Sub-Path"}]}],
          datatype: "myjson",
		  select: true,
        }
      ]

    }); 
   
   })
  
  </script>

</body>

</html>